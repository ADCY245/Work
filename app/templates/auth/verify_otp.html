{% extends "base.html" %}
{% block title %}Verify OTP | PhysiHome{% endblock %}
{% block content %}
<section class="auth-card card">
  <header class="auth-header">
    <h1>Enter your OTP</h1>
    <p>We sent a one-time code to <strong>{{ email }}</strong>. It expires in a few minutes.</p>
  </header>

  {% if error %}
  <div class="alert error">{{ error }}</div>
  {% endif %}

  {% if email_error %}
  <div class="alert warn">We could not send the OTP email. {{ email_error }}</div>
  {% endif %}

  {% if admin_email_error %}
  <div class="alert warn">We could not notify admins about your documents. {{ admin_email_error }}</div>
  {% endif %}

  <form class="stack" method="post" action="/api/auth/verify-otp">
    <input type="hidden" name="email" value="{{ email }}" />
    <label>
      Verification code
      <input
        type="text"
        name="otp"
        inputmode="numeric"
        pattern="\d{6}"
        maxlength="6"
        placeholder="6-digit code"
        required
      />
    </label>
    <button class="btn primary" type="submit">Verify</button>
  </form>

  <p class="small">
    Need to start over?
    {% if role == 'doctor' %}
    <a href="/doctor-signup">Return to doctor onboarding</a>
    {% else %}
    <a href="/signup">Return to sign up</a>
    {% endif %}
  </p>
</section>
{% endblock %}
