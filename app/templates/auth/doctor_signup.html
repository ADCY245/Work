{% extends "base.html" %}
{% block title %}Doctor Verification | PhysiHome{% endblock %}
{% block content %}
<section class="auth-card card">
  <header class="auth-header">
    <h1>Doctor onboarding</h1>
    <p>Share your details, upload your documents, and verify your email with an OTP.</p>
  </header>

  {% if error %}
  <div class="alert error">{{ error }}</div>
  {% endif %}

  <form class="stack" method="post" action="/api/auth/doctor-signup" enctype="multipart/form-data">
    <div class="form-grid two-col">
      <label>
        First name
        <input
          type="text"
          name="first_name"
          placeholder="Your first name"
          autocomplete="given-name"
          required
        />
      </label>
      <label>
        Last name
        <input
          type="text"
          name="last_name"
          placeholder="Your last name"
          autocomplete="family-name"
          required
        />
      </label>
    </div>

    <div class="form-grid two-col">
      <label>
        Date of birth
        <div class="dob-input" data-dob-field>
          <input 
            type="date" 
            name="dob_backup"
            autocomplete="bday"
            required 
            pattern="\d{4}-\d{2}-\d{2}"
            title="YYYY-MM-DD format"
          />
          <input type="hidden" name="dob" data-dob-hidden />
          <div class="dob-text-entry">
            <input
              type="text"
              inputmode="numeric"
              placeholder="DD-MM-YYYY"
              aria-label="Type your date of birth as DD-MM-YYYY"
              data-dob-text
              name="dob_display"
              autocomplete="bday"
            />
            <small class="helper">Type the date (DD-MM-YYYY) or use the picker.</small>
          </div>
        </div>
      </label>
      <label>
        Contact number
        <input
          type="tel"
          name="phone"
          placeholder="10-digit number"
          autocomplete="tel"
          required
        />
      </label>
    </div>

    <div class="form-grid two-col">
      <label>
        Email address
        <input
          type="email"
          name="email"
          placeholder="you@clinic.in"
          autocomplete="email"
          required
        />
      </label>
      <label>
        Gender (optional)
        <select name="gender">
          <option value="">Prefer not to say</option>
          <option value="female">Female</option>
          <option value="male">Male</option>
          <option value="other">Other</option>
        </select>
      </label>
    </div>

    <div class="form-grid two-col">
      <label>
        City you operate in
        <input
          type="text"
          name="city"
          placeholder="e.g. Mumbai"
          autocomplete="address-level2"
          required
        />
      </label>
      <label>
        Preferred PIN code
        <input
          type="text"
          name="preferred_pin"
          placeholder="e.g. 400060"
          pattern="\d{3,6}"
          inputmode="numeric"
          required
        />
        <small class="helper">We use this to match nearby patients.</small>
      </label>
    </div>

    <label>
      Specialization
      <input
        type="text"
        name="specialization"
        placeholder="e.g. Orthopedic Physiotherapy"
        autocomplete="organization-title"
        required
      />
    </label>

    <label>
      Password
      <input
        type="password"
        name="password"
        placeholder="Create a strong password"
        autocomplete="new-password"
        required
      />
    </label>

    <div class="form-grid two-col">
      <label>
        Your photo (mandatory)
        <input type="file" name="self_photo" accept="image/*" autocomplete="off" required />
      </label>
      <label>
        Degree certificate (mandatory)
        <input type="file" name="degree_photo" accept="image/*,.pdf" autocomplete="off" required />
      </label>
    </div>

    <label class="upload">
      Visiting card (optional)
      <input type="file" name="visiting_card" accept="image/*,.pdf" autocomplete="off" />
    </label>

    <p class="helper">Documents are sent to our admin team for verification.</p>

    <button class="btn primary" type="submit">Send OTP</button>
  </form>

  <div class="auth-links">
    <p class="small">
      Not a doctor?
      <a href="/signup">Create a patient account</a>
    </p>
    <p class="small">
      Already with us?
      <a href="/login">Login</a>
    </p>
  </div>
</section>
{% endblock %}
