{% extends "base.html" %}
{% block title %}Create Account | PhysiHome{% endblock %}
{% block content %}
<section class="auth-card card">
  <header class="auth-header">
    <h1>Create your patient account</h1>
    <p>We will send a one-time code to your email for verification.</p>
  </header>

  {% if error %}
  <div class="alert error">{{ error }}</div>
  {% endif %}

  <form class="stack" method="post" action="/api/auth/signup" enctype="multipart/form-data">
    <div class="form-grid two-col">
      <label>
        First name
        <input type="text" name="first_name" placeholder="Your first name" required />
      </label>
      <label>
        Last name
        <input type="text" name="last_name" placeholder="Your last name" required />
      </label>
    </div>

    <div class="form-grid two-col">
      <label>
        Date of birth
        <div class="dob-input" data-dob-field>
          <input 
            type="date" 
            name="dob" 
            required 
            pattern="\d{4}-\d{2}-\d{2}"
            title="YYYY-MM-DD format"
          />
          <div class="dob-text-entry">
            <input
              type="text"
              inputmode="numeric"
              placeholder="YYYY-MM-DD"
              aria-label="Type your date of birth as YYYY-MM-DD"
              data-dob-text
            />
            <small class="helper">Type the date or use the picker.</small>
          </div>
        </div>
      </label>
      <label>
        Contact number
        <input type="tel" name="phone" placeholder="10-digit number" required />
      </label>
    </div>

    <div class="form-grid two-col">
      <label>
        Email address
        <input type="email" name="email" placeholder="you@family.in" required />
      </label>
      <label>
        Gender (optional)
        <select name="gender">
          <option value="">Prefer not to say</option>
          <option value="female">Female</option>
          <option value="male">Male</option>
          <option value="other">Other</option>
        </select>
      </label>
    </div>

    <label class="upload">
      Profile photo (optional)
      <input type="file" name="profile_photo" accept="image/*" />
    </label>

    <label>
      Password
      <input
        type="password"
        name="password"
        placeholder="Create a strong password"
        required
        minlength="8"
        pattern="(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[^A-Za-z0-9]).{8,}"
        title="Must be at least 8 characters and include upper, lower, number, and special character"
      />
      <small class="helper">Use at least 8 characters including upper, lower, number, and symbol.</small>
    </label>
    <button class="btn primary" type="submit">Send OTP</button>
  </form>

  <p class="small">
    Already with us?
    <a href="/login">Login</a>
  </p>
  <p class="small">
    Are you a doctor?
    <a href="/signup/doctor">Go to doctor signup</a>
  </p>
</section>
{% endblock %}
