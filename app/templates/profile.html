{% extends "base.html" %}
{% block title %}Profile | PhysiHome{% endblock %}
{% block content %}
<section class="profile-card card" data-pending-verification="{{ 'true' if pending_verification else 'false' }}">
  <header class="auth-header">
    <div class="profile-avatar">
      <img src="{{ profile_avatar_url }}" alt="Profile avatar" />
    </div>
    <h1>{{ profile.name }}</h1>
    {% if profile.gender %}
    <span class="badge">{{ profile.gender|title }}</span>
    {% endif %}
  </header>

  {% if profile.pending_verification %}
  <div class="alert warn">
    Your doctor verification is pending. We will complete it within 12 hours. Thank you.
  </div>
  {% endif %}

  <div class="profile-grid">
    <div>
      <p class="label">Email</p>
      <p>{{ profile.email }}</p>
    </div>
    <div>
      <p class="label">Contact</p>
      <p>{{ profile.contact }}</p>
    </div>
    <div>
      <p class="label">Date of birth</p>
      <p>{{ profile.dob }}</p>
    </div>
    {% if profile.specialization %}
    <div>
      <p class="label">Specialization</p>
      <p>{{ profile.specialization }}</p>
    </div>
    {% endif %}
    {% if profile.doctor_verification_status %}
    <div>
      <p class="label">Doctor verification</p>
      <p>{{ profile.doctor_verification_status }}</p>
    </div>
    {% endif %}
  </div>

  {% if self_photo_url or degree_photo_url or visiting_card_url %}
  <div class="profile-docs">
    <h2>Uploaded documents</h2>
    <div class="doc-grid">
      {% if self_photo_url %}
      <figure class="doc-card">
        <img src="{{ self_photo_url }}" alt="Self photo" />
        <figcaption>Self photo</figcaption>
      </figure>
      {% endif %}
      {% if degree_photo_url %}
      <figure class="doc-card">
        <img src="{{ degree_photo_url }}" alt="Degree document" />
        <figcaption>Degree certificate</figcaption>
      </figure>
      {% endif %}
      {% if visiting_card_url %}
      <figure class="doc-card">
        <img src="{{ visiting_card_url }}" alt="Visiting card" />
        <figcaption>Visiting card</figcaption>
      </figure>
      {% endif %}
    </div>
  </div>
  {% endif %}

  <dialog id="pendingVerificationDialog" class="modal">
    <div class="modal-body">
      <h2>Verification in progress</h2>
      <p>Your profile verification will be completed within 12 hours. Thank you.</p>
      <form method="dialog">
        <button class="btn primary" type="submit">Got it</button>
      </form>
    </div>
  </dialog>
</section>
{% endblock %}
